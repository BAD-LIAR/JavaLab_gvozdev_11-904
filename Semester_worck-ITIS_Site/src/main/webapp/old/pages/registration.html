<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
          integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <title>Registration</title>
    <link rel="stylesheet"  href="../styles/register.css">

    <script type="javascript" src="../scripts/Validation.js"></script>
</head>
<body>
<h1><span style="color: #0073ff; ">I</span>T<span style="color: #0073ff ">I</span>S</h1>

<form id="registration_form" class="form" method="post">

    <div class="register_field">
        <label for="login" onchange="checkUsername()">Enter your username:</label>
        <br>
        <input onfocusout="check()" required type="text" id="login" name="user_name" class="form-control">
        <h5 style="color: red; display: none" id="err_login">Такой логин уже занят</h5>
    </div>

    <div class="register_field">
        <label for="password">Enter your password:</label>
        <br>
        <!--        <input required type="password" id="password" name="user_password" class="form-control" onchange="checkPassword()">-->
        <input required type="password" id="password" name="user_password" class="form-control"
               pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
               title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters">
    </div>

    <div class="register_field">
        <label for="check_password">Enter your password once again:</label>
        <br>
        <input required type="password" id="check_password" name="user_password_again" class="form-control"
               onchange="confirmPassword()">
    </div>

    <div class="register_field">
        <label for="first_name">Enter your first name:</label>
        <br>
        <input required type="text" id="first_name" name="first_name" class="form-control">
    </div>

    <div class="register_field">
        <label for="last_name">Enter your last name:</label>
        <br>
        <input required type="text" id="last_name" name="last_name" class="form-control">
    </div>

    <div class="register_field">
        <label for="group_number">Select your group number:</label>
        <br>
        <select required id="group_number" name="group_number" class="form-control">
            <option>11-901</option>
            <option>11-902</option>
            <option>11-903</option>
            <option>11-904</option>
            <option>11-905</option>
            <option>11-906</option>
            <option>11-907</option>
            <option>11-908</option>
            <option>11-909</option>
            <option>11-910</option>
            <option>11-911</option>
            <option>11-912</option>
            <option>11-913</option>
        </select>
    </div>

    <div>
        <label for="remember_me">Remember me:</label>
        <input type="checkbox" id="remember_me" name="remember_me" class="form-control my_check_box">
    </div>

    <div class="register_field row">
        <button class="form-control col-sm-1" type="submit" onclick=z>Register</button>
        <a href="/login">Back</a>
    </div>


</form>

<div id="message">
    <h3>Password must contain the following:</h3>
    <p id="letter" class="invalid">A <b>lowercase</b> letter</p>
    <p id="capital" class="invalid">A <b>capital (uppercase)</b> letter</p>
    <p id="number" class="invalid">A <b>number</b></p>
    <p id="length" class="invalid">Minimum <b>8 characters</b></p>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
        integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
        crossorigin="anonymous"></script>
</body>
<script>
    function check() {
    const xhr = new XMLHttpRequest();
    const login = document.getElementById("login");
    xhr.open('GET', 'http://localhost:8080/ajax?login=' + login.value, false);
    xhr.send();
    if (xhr.status === 200) {
        const result = xhr.responseText;
        if(result === 'true'){
            document.getElementById("err_login").style.display = 'block';
        } else {
            document.getElementById("err_login").style.display = 'none';
        }
    } else{
        const result = xhr.responseText;
        if(result === 'true'){
            document.getElementById("err_login").style.display = 'block';
        } else {
            document.getElementById("err_login").style.display = 'none';
        }
    }
}</script>
</html>